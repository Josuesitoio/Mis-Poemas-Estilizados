<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>El Instante Infinito</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,700;1,400&family=Cinzel:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #020204;
            --primary: #c8a97b;
            --text-color: #c3c3c3;
            --text-muted: #8a8a8a;
            --card-bg: rgba(10, 10, 15, 0.45);
            --card-border: rgba(150, 120, 80, 0.2);
            --glow-color: rgba(200, 169, 123, 0.3);
            --aurora-1: #3a2d5c;
            --aurora-2: #1a3a5f;
        }

        body.light {
            --bg-color: #f5f2ef;
            --primary: #7a5c3a;
            --text-color: #3d3d3d;
            --text-muted: #6b6b6b;
            --card-bg: rgba(255, 255, 255, 0.5);
            --card-border: rgba(122, 92, 58, 0.2);
            --glow-color: rgba(122, 92, 58, 0.25);
            --aurora-1: #d3c4e3;
            --aurora-2: #c4d3e3;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            color: var(--text-color);
            background-color: var(--bg-color);
            display: grid;
            place-items: center;
            min-height: 100vh;
            padding: 60px 20px;
            overflow-x: hidden;
            overflow-y: auto;
            position: relative;
            transition: background-color 0.6s ease;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(800px circle at top left, var(--aurora-1), var(--aurora-2), transparent 70%);
            opacity: 0.4;
            filter: blur(80px);
            z-index: -1;
            animation: aurora-pulse 15s ease-in-out infinite;
        }

        @keyframes aurora-pulse {
            0% { transform: scale(1); opacity: 0.4; }
            50% { transform: scale(1.05); opacity: 0.6; }
            100% { transform: scale(1); opacity: 0.4; }
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--card-border);
            cursor: pointer;
            display: grid;
            place-items: center;
            font-size: 20px;
            color: var(--primary);
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        .theme-toggle:hover {
            transform: scale(1.1) rotate(15deg);
            border-color: var(--primary);
        }

        .stage {
            width: min(900px, 95vw);
            padding: 50px;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 24px;
            backdrop-filter: blur(12px);
            box-shadow: 0 16px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            position: relative;
            transition: background 0.6s ease, border 0.6s ease;
            overflow: hidden;
        }
        
        .stage::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(400px circle at 0% 0%, var(--primary), transparent 70%);
            z-index: -1;
            animation: lamp-glow 10s ease-in-out infinite;
            transform-origin: top left;
        }
        
        @keyframes lamp-glow {
            0% { opacity: 0.5; transform: scale(0.95); }
            50% { opacity: 0.8; transform: scale(1); }
            100% { opacity: 0.5; transform: scale(0.95); }
        }

        #particle-canvas {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            border-radius: 24px;
        }

        .content-wrapper {
            position: relative;
            z-index: 1;
        }
        
        h1, .subtitle, .poem p {
            opacity: 1; 
        }
        
        .char {
            display: inline-block;
            opacity: 0;
            transform: translateY(25px) scale(0.8) rotateX(-45deg);
            animation: char-reveal 1s cubic-bezier(0.2, 1, 0.3, 1) forwards;
        }
        @keyframes char-reveal {
            to {
                opacity: 1;
                transform: translateY(0) scale(1) rotateX(0deg);
            }
        }

        h1 {
            font-family: 'Cinzel', serif;
            color: var(--primary);
            /* CAMBIO: Ajuste de tamaño fluido y espaciado para evitar malos cortes */
            font-size: clamp(1.8rem, 7vw, 3.2rem);
            letter-spacing: 0.12em;
            text-transform: uppercase;
            text-shadow: 0 4px 30px var(--glow-color);
            margin-bottom: 1rem;
            /* CAMBIO: Propiedad para balancear el texto y evitar huérfanos */
            text-wrap: balance;
        }

        .subtitle {
            color: var(--text-muted);
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            margin-bottom: 2.5rem;
            letter-spacing: 0.05em;
            text-wrap: pretty;
        }

        .poem {
            /* CAMBIO: Tamaño de fuente fluido para mejor adaptabilidad */
            font-size: clamp(1rem, 3vw, 1.3rem);
            line-height: 1.8;
            color: var(--text-color);
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
        }

        .poem p {
            margin-bottom: 1.5em;
        }

        .em {
            color: var(--primary);
            font-style: italic;
            font-weight: 700;
            text-shadow: 0 2px 15px var(--glow-color);
            transition: text-shadow 0.3s ease;
        }
        .em:hover {
            text-shadow: 0 2px 25px var(--glow-color);
        }

        /* CAMBIO: Ajustes específicos para móviles */
        @media (max-width: 768px) {
            body { padding: 40px 10px; }
            .stage { padding: 40px 20px; }
        }

    </style>
</head>
<body>

    <button class="theme-toggle" id="themeToggle" aria-label="Alternar tema" title="Modo claro/oscuro">
        <span id="toggleIcon">☾</span>
    </button>

    <div class="stage" id="stage">
        <canvas id="particle-canvas" aria-hidden="true"></canvas>
        <div class="content-wrapper">
            <h1 data-animate-text>El Instante Infinito</h1>
            <div class="subtitle" data-animate-text>Un poema sobre un momento que se estira.</div>

            <div class="poem">
                <p data-animate-text>A veces, solo a veces,<br>
                un instante deja de ser instante<br>
                y se convierte en <span class="em">eternidad</span>.<br>
                No en el tiempo, no en este mundo,<br>
                sino en mi mente,<br>
                donde vuelve,<br>
                donde insiste en repetirse.</p>
                
                <p data-animate-text>Ese instante es más que un destello:<br>
                es la <span class="em">unión de lo humano con lo sagrado</span>,<br>
                de lo efímero con lo infinito,<br>
                de <span class="em">tu alma con la mía</span>,<br>
                de mi piel con tu deseo.</p>
                
                <p data-animate-text>Porque en esos breves segundos<br>
                <span class="em">nuestra finitud toca la eternidad</span>.<br>
                Nuestros cuerpos rozan lo intangible,<br>
                y el roce se hace <span class="em">revelación</span>:<br>
                cuando tu voz tiembla,<br>
                cuando tu piel busca la mía,<br>
                <span class="em">el cielo se abre solo para nosotros</span>.</p>
                
                <p data-animate-text>Es un instante de <span class="em">fuego y calma</span>,<br>
                de pasión y ternura,<br>
                de deseo que no muerde<br>
                sino que acaricia,<br>
                y ofrece un <span class="em">sorbo del paraíso</span><br>
                que tanto anhelamos.</p>
                
                <p data-animate-text><span class="em">Lo intangible se hace carne</span>,<br>
                lo eterno nace en un solo gesto.<br>
                Si me dejaras mostrarte,<br>
                descubrirías que lo <span class="em">infinito</span><br>
                puede brotar de dos almas finitas,<br>
                de dos cuerpos entregados.</p>
                
                <p data-animate-text>Entonces, el cielo nos celebraría,<br>
                el infierno nos envidiaría,<br>
                los ricos se perderían en nostalgia<br>
                y los pobres hallarían consuelo.<br>
                Y tú y yo, en ese instante,<br>
                habríamos <span class="em">creado lo eterno</span>:<br>
                desde la carne, desde el deseo,<br>
                desde la <span class="em">humanidad que arde</span><br>
                <span class="em">cuando me encuentro en ti</span>.</p>
            </div>
        </div>
    </div>

    <script>
        // --- SOLO FUNCIONES VISUALES Y EL TOGGLE DE TEMA ---

        // 1. Botón para cambiar tema claro/oscuro
        const themeToggle = document.getElementById('themeToggle');
        const toggleIcon = document.getElementById('toggleIcon');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light');
            const isLight = document.body.classList.contains('light');
            toggleIcon.textContent = isLight ? '☀' : '☾';
            if (window.initParticles) {
                window.initParticles();
            }
        });

        // 2. Animación de aparición de texto
        document.addEventListener('DOMContentLoaded', () => {
            let totalDelay = 0;

            function applyAnimationToNode(node, container) {
                if (node.nodeType === Node.TEXT_NODE) {
                    const chars = node.textContent.split('');
                    chars.forEach(char => {
                        const span = document.createElement('span');
                        span.className = 'char';
                        span.style.animationDelay = `${totalDelay}s`;
                        span.innerHTML = char === ' ' ? '&nbsp;' : char;
                        container.appendChild(span);
                        totalDelay += 0.009;
                    });
                } else if (node.nodeType === Node.ELEMENT_NODE) {
                    const elementClone = node.cloneNode(false);
                    container.appendChild(elementClone);
                    node.childNodes.forEach(child => {
                        applyAnimationToNode(child, elementClone);
                    });
                }
            }
            
            const elementsToAnimate = document.querySelectorAll('[data-animate-text]');
            elementsToAnimate.forEach(element => {
                const nodes = Array.from(element.childNodes);
                element.innerHTML = '';
                element.style.opacity = '1';

                nodes.forEach(node => {
                    applyAnimationToNode(node, element);
                });
                totalDelay += 0.18; 
            });
        });

        // 3. Partículas en el fondo de la tarjeta
        (function() {
            const canvas = document.getElementById('particle-canvas');
            const ctx = canvas.getContext('2d');
            const stage = document.getElementById('stage');
            let particles = [];
            
            function resizeCanvas() {
                const stageRect = stage.getBoundingClientRect();
                canvas.width = stageRect.width;
                canvas.height = stageRect.height;
                initParticles();
            }

            window.initParticles = function() {
                particles = [];
                const computedStyle = getComputedStyle(document.body);
                const particleColor = computedStyle.getPropertyValue('--primary').trim();
                let numParticles = (canvas.width * canvas.height) / 8000;
                if(window.innerWidth < 768) numParticles /= 2;

                for (let i = 0; i < numParticles; i++) {
                    particles.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        vx: (Math.random() - 0.5) * 0.3,
                        vy: (Math.random() - 0.5) * 0.3,
                        size: Math.random() * 1.5 + 0.5,
                        color: particleColor,
                        alpha: Math.random() * 0.5 + 0.2
                    });
                }
            }

            function animate() {
                requestAnimationFrame(animate);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;

                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = `${p.color}${Math.round(p.alpha * 255).toString(16).padStart(2, '0')}`;
                    ctx.fill();
                });
            }

            const resizeObserver = new ResizeObserver(() => {
                resizeCanvas();
            });
            resizeObserver.observe(stage);

            animate();
        })();
    </script>
</body>
</html>