<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lo que no digo</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Kalam:wght@300;400&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Tema Claro (por defecto) */
            --paper-bg: #f3efe9;
            --ink-color: #2b2825;
            --highlight-ink-color: #000;
            --annotation-color: #4a5568; /* Color de l√°piz/tinta azul-gris */
            --heart-color: #e53e3e;
            --notebook-line-color: rgba(180, 200, 230, 0.5);
            --paper-texture: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23d4cfc8" fill-opacity="0.1"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');

            --font-main: 'Kalam', cursive;
            --font-highlight: 'Caveat', cursive;
            --transition-speed: 0.4s;
        }

        body.dark-mode {
            /* Tema Oscuro */
            --paper-bg: #2d2d2d;
            --ink-color: #c7c7c7;
            --highlight-ink-color: #ffffff;
            --annotation-color: #718096;
            --heart-color: #f7768e;
            --notebook-line-color: rgba(90, 110, 140, 0.3);
            --paper-texture: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23454545" fill-opacity="0.1"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
        }

        body {
            background-color: var(--paper-bg);
            background-image: 
                repeating-linear-gradient(var(--paper-bg), var(--paper-bg) 3.1rem, var(--notebook-line-color) 3.1rem, var(--notebook-line-color) 3.15rem),
                var(--paper-texture);
            color: var(--ink-color);
            font-family: var(--font-main);
            margin: 0;
            overflow-x: hidden;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        main {
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .notebook-page {
            max-width: 700px;
            padding: 5rem 2rem 5rem 4rem;
            position: relative;
            border-left: 2px solid rgba(255, 150, 150, 0.4);
        }

        header {
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            border-bottom: 1px dashed rgba(0,0,0,0.1);
            margin-bottom: 5rem;
        }
        body.dark-mode header { border-bottom-color: rgba(255,255,255,0.1); }

        header h1 {
            font-family: var(--font-highlight);
            font-size: 3rem;
            color: var(--highlight-ink-color);
            transition: color var(--transition-speed);
        }

        .estrofa {
            margin-bottom: 15rem;
            position: relative;
        }

        .estrofa p {
            font-size: 1.8rem;
            line-height: 1.7;
            margin: 1.4rem 0;
            clip-path: polygon(0 0, 0 0, 0 100%, 0% 100%);
            transition: clip-path 1s cubic-bezier(0.645, 0.045, 0.355, 1);
        }
        .estrofa.visible p {
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
        }

        .highlight {
            font-family: var(--font-highlight);
            font-size: 2.2rem;
            color: var(--highlight-ink-color);
            position: relative;
            transition: all 0.2s;
        }
        .highlight:hover {
            transform: translateY(-2px);
        }

        .underline::after {
            content: ''; position: absolute; left: 0; bottom: -5px; width: 100%; height: 2px;
            background-color: var(--annotation-color); transform: scaleX(0); transform-origin: left;
            transition: transform 0.8s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .estrofa.visible .underline::after { transform: scaleX(1); }

        .circle { position: relative; }
        .circle .circle-svg {
            position: absolute; top: 50%; left: 50%; width: 130%; height: 160%;
            transform: translate(-50%, -50%); z-index: -1;
            stroke: var(--annotation-color); stroke-width: 2; fill: none;
            stroke-dasharray: 1000; stroke-dashoffset: 1000;
            transition: stroke-dashoffset 1.2s ease-in-out;
        }
        .estrofa.visible .circle .circle-svg { stroke-dashoffset: 0; }

        .heart-annotation { position: relative; }
        .heart-annotation .heart-svg {
            position: absolute;
            top: 50%;
            right: -45px;
            width: 40px;
            height: 40px;
            transform: translateY(-50%) rotate(-15deg);
            stroke: var(--heart-color);
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 500;
            stroke-dashoffset: 500;
            transition: stroke-dashoffset 1.5s cubic-bezier(0.47, 0, 0.745, 0.715);
        }
        .estrofa.visible .heart-annotation .heart-svg {
            stroke-dashoffset: 0;
        }
        
        .doodle {
            position: absolute; width: 50px; height: 50px; opacity: 0;
            transition: opacity 1.5s; stroke: var(--annotation-color); stroke-width: 2; fill: none;
        }
        .estrofa.visible .doodle {
            opacity: 0.5;
        }
        #doodle1 { top: 20%; right: -80px; transform: rotate(15deg); }
        #doodle2 { top: 50%; left: -90px; transform: rotate(-20deg); }

        #theme-toggle {
            position: fixed; top: 20px; right: 20px; z-index: 1000; font-size: 1.5rem;
            background: transparent; border: none; cursor: pointer; transition: transform 0.3s;
        }
        #theme-toggle:hover { transform: scale(1.2) rotate(10deg); }
        #sun-icon { display: none; }
        body.dark-mode #sun-icon { display: block; }
        body.dark-mode #moon-icon { display: none; }

        @media (max-width: 768px) {
            .notebook-page { padding: 5rem 1rem; border-left: none; }
            header h1 { font-size: 2.2rem; }
            .estrofa p { font-size: 1.4rem; line-height: 2; margin: 1rem 0; }
            
            /* --- CORRECCI√ìN PARA L√çNEAS EN M√ìVIL --- */
            body {
                /* Se redefine el background-image con un espaciado de l√≠nea (2.8rem) 
                   que coincide con la nueva altura de l√≠nea del texto en m√≥viles. */
                background-image:
                    repeating-linear-gradient(var(--paper-bg), var(--paper-bg) 2.75rem, var(--notebook-line-color) 2.75rem, var(--notebook-line-color) 2.8rem),
                    var(--paper-texture);
            }

            .doodle { display: none; }
            .heart-annotation .heart-svg { right: -25px; width: 30px; height: 30px; }
        }
    </style>
</head>
<body>

    <button id="theme-toggle" title="Cambiar tema">
        <span id="moon-icon">üåô</span>
        <span id="sun-icon">‚òÄÔ∏è</span>
    </button>

    <main>
        <div class="notebook-page">
            <header>
                <h1>Lo que no digo</h1>
            </header>

            <section class="estrofa">
                <p>Lo que no digo</p>
                <p>se me queda en escrito,</p>
                <p>como un <span class="highlight">te pienso t√≠mido</span></p>
                <p>aguardando el instante justo.</p>
            </section>
            
            <section class="estrofa">
                 <svg class="doodle" id="doodle1" viewBox="0 0 100 100">
                    <path d="M20,80 C40,20 60,20 80,80 S60,100 50,80 S40,60 20,80" stroke-linecap="round" />
                    <circle cx="35" cy="25" r="3" />
                    <circle cx="65" cy="25" r="3" />
                 </svg>
                 <p>No digo cu√°nto me importas,</p>
                 <p>porque suena inmenso,</p>
                 <p>pero lo siento</p>
                 <p>en <span class="highlight underline">cosas peque√±as:</span></p>
                 <p>como guardar tu mensaje</p>
                 <p>aunque lo haya le√≠do mil veces.</p>
            </section>

            <section class="estrofa">
                <p>No digo que me gustas m√°s</p>
                <p>cuando, sin notarlo, <span class="highlight">me sonrojas,</span></p>
                <p>o cuando r√≠es por algo</p>
                <p>que ni entend√≠‚Ä¶</p>
                <p>y aun as√≠ <span class="highlight circle">r√≠o contigo. <svg class="circle-svg"><ellipse cx="50" cy="50" rx="45" ry="30"/></svg></span></p>
            </section>

             <section class="estrofa">
                <svg class="doodle" id="doodle2" viewBox="0 0 100 100">
                    <path d="M20 70 C 30 90, 70 90, 80 70" stroke-linecap="round"/>
                </svg>
                <p>Lo que no digo</p>
                <p>habita en mis pausas,</p>
                <p>en mis ganas de escribirte</p>
                <p>sin un motivo claro.</p>
            </section>

            <section class="estrofa">
                <p>No digo me haces falta</p>
                <p>cuando no hablamos,</p>
                <p>pero <span class="highlight underline">mi d√≠a te busca,</span></p>
                <p>aunque no lo sepas.</p>
            </section>
            
            <section class="estrofa">
                <p>Y tal vez nunca lo pueda expresar,</p>
                <p>o quiz√° un d√≠a halle el modo.</p>
                <p>Pero por ahora,</p>
                <p><span class="highlight heart-annotation">d√©jame quererte <svg class="heart-svg" viewBox="0 0 24 24"><path d="M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.631 7.928 9.95 12 14.81 4.072-4.86 12-10.179 12-14.81 0-6.792-8.875-8.306-12-2.944z"/></svg></span></p>
                <p>as√≠‚Ä¶</p>
                <p>en un <span class="highlight">silencio hermoso.</span></p>
            </section>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- L√ìGICA DEL INTERRUPTOR DE TEMA ---
            const themeToggle = document.getElementById('theme-toggle');
            const body = document.body;

            // Establecer tema inicial basado en localStorage o preferencia del sistema
            if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                body.classList.add('dark-mode');
            } else {
                body.classList.remove('dark-mode');
            }

            themeToggle.addEventListener('click', () => {
                body.classList.toggle('dark-mode');
                localStorage.setItem('theme', body.classList.contains('dark-mode') ? 'dark' : 'light');
            });

            // --- OBSERVADOR PARA LA ANIMACI√ìN DE "ESCRITURA" ---
            const estrofas = document.querySelectorAll('.estrofa');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const estrofa = entry.target;
                        estrofa.classList.add('visible');
                        
                        const lines = estrofa.querySelectorAll('p');
                        lines.forEach((line, index) => {
                            line.style.transitionDelay = `${index * 150}ms`;
                        });
                        
                        const highlights = estrofa.querySelectorAll('.underline, .circle, .heart-annotation');
                        highlights.forEach(highlight => {
                             highlight.style.transitionDelay = `${lines.length * 150 + 200}ms`;
                        });

                        observer.unobserve(estrofa);
                    }
                });
            }, { threshold: 0.3 });

            estrofas.forEach(estrofa => observer.observe(estrofa));
        });
    </script>
</body>
</html>